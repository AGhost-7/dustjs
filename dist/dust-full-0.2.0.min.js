//
// Dust - Asynchronous Templating v0.2.0
// http://akdubya.github.com/dustjs
//
// Copyright (c) 2010, Aleksander Williams
// Released under the MIT License.
//

var dust={};
(function(q){function z(f,j,k){this.stack=f;this.global=j;this.blocks=k}function H(f,j,k,w){this.tail=j;this.isObject=!q.isArray(f)&&f&&typeof f==="object";this.head=f;this.index=k;this.of=w}function p(f){this.head=new l(this);this.callback=f;this.out=""}function J(){this.head=new l(this)}function l(f,j,k){this.root=f;this.next=j;this.data="";this.flushable=false;this.taps=k}function G(f,j){this.head=f;this.tail=j}q.cache={};q.register=function(f,j){q.cache[f]=j};q.render=function(f,j,k){k=(new p(k)).head;
q.load(f,k,z.wrap(j)).end()};q.stream=function(f,j){var k=new J;q.nextTick(function(){q.load(f,k.head,z.wrap(j)).end()});return k};q.load=function(f,j,k){return(tmpl=q.cache[f])?tmpl(j,k):j.setError(Error("Template Not Found: "+f))};q.loadSource=function(f){eval(f)};q.isArray=Array.isArray?Array.isArray:function(f){return Object.prototype.toString.call(f)=="[object Array]"};q.nextTick=function(f){setTimeout(f,0)};q.isEmpty=function(f){if(q.isArray(f)&&!f.length)return true;if(f===0)return false;return!f};
q.filter=function(f,j,k){for(var w=k.length,B=0;B<w;B++){var F=k[B];if(F==="s")j=null;else f=q.filters[F](f)}if(j)f=q.filters[j](f);return f};q.filters={h:function(f){return q.escapeHtml(f)},j:function(f){return q.escapeJs(f)},u:encodeURI,uc:encodeURIComponent};q.makeBase=function(f){return new z(new H,f)};z.wrap=function(f){if(f instanceof z)return f;return new z(new H(f))};z.prototype.get=function(f){for(var j=this.stack,k;j;){if(j.isObject){k=j.head[f];if(k!==undefined)return k}j=j.tail}return this.global?
this.global[f]:undefined};z.prototype.getPath=function(f,j){var k=this.stack,w=j.length;if(f&&w===0)return k.head;if(k.isObject){k=k.head;for(var B=0;k&&B<w;){k=k[j[B]];B++}return k}};z.prototype.push=function(f,j,k){return new z(new H(f,this.stack,j,k),this.global,this.blocks)};z.prototype.rebase=function(f){return new z(new H(f),this.global,this.blocks)};z.prototype.current=function(){return this.stack.head};z.prototype.getBlock=function(f){var j=this.blocks;if(j)for(var k=j.length,w;k--;)if(w=
j[k][f])return w};z.prototype.shiftBlocks=function(f){var j=this.blocks;if(f){newBlocks=j?j.concat([f]):[f];return new z(this.stack,this.global,newBlocks)}return this};p.prototype.flush=function(){for(var f=this.head;f;){if(f.flushable)this.out+=f.data;else{if(f.error){this.callback(f.error);this.flush=function(){}}return}this.head=f=f.next}this.callback(null,this.out)};J.prototype.flush=function(){for(var f=this.head;f;){if(f.flushable)this.emit("data",f.data);else{if(f.error){this.emit("error",
f.error);this.flush=function(){}}return}this.head=f=f.next}this.emit("end")};J.prototype.emit=function(f,j){var k=this.events;k&&k[f]&&k[f](j)};J.prototype.on=function(f,j){if(!this.events)this.events={};this.events[f]=j;return this};l.prototype.write=function(f){var j=this.taps;if(j)f=j.go(f);this.data+=f;return this};l.prototype.end=function(f){f&&this.write(f);this.flushable=true;this.root.flush();return this};l.prototype.map=function(f){var j=new l(this.root,this.next,this.taps),k=new l(this.root,
j,this.taps);this.next=k;this.flushable=true;f(k);return j};l.prototype.tap=function(f){var j=this.taps;this.taps=j?j.push(f):new G(f);return this};l.prototype.untap=function(){this.taps=this.taps.tail;return this};l.prototype.render=function(f,j){return f(this,j)};l.prototype.reference=function(f,j,k,w){if(typeof f==="function"){f=f(this,j,null,{auto:k,filters:w});if(f instanceof l)return f}return q.isEmpty(f)?this:this.write(q.filter(f,k,w))};l.prototype.section=function(f,j,k,w){if(typeof f===
"function"){f=f(this,j,k,w);if(f instanceof l)return f}var B=k.block;k=k["else"];if(w)j=j.push(w);if(q.isArray(f)){if(B){w=f.length;k=this;for(var F=0;F<w;F++)k=B(k,j.push(f[F],F,w));return k}}else if(f===true){if(B)return B(this,j)}else if(f||f===0){if(B)return B(this,j.push(f))}else if(k)return k(this,j);return this};l.prototype.exists=function(f,j,k){var w=k.block;k=k["else"];if(q.isEmpty(f)){if(k)return k(this,j)}else if(w)return w(this,j);return this};l.prototype.notexists=function(f,j,k){var w=
k.block;k=k["else"];if(q.isEmpty(f)){if(w)return w(this,j)}else if(k)return k(this,j);return this};l.prototype.block=function(f,j,k){k=k.block;if(f)k=f;if(k)return k(this,j);return this};l.prototype.partial=function(f,j){if(typeof f==="function")return this.capture(f,j,function(k,w){q.load(k,w,j).end()});return q.load(f,this,j)};l.prototype.helper=function(f,j,k,w){return q.helpers[f](this,j,k,w)};l.prototype.capture=function(f,j,k){return this.map(function(w){var B=new p(function(F,N){F?w.setError(F):
k(N,w)});f(B.head,j).end()})};l.prototype.setError=function(f){this.error=f;this.root.flush();return this};q.helpers={sep:function(f,j,k){if(j.stack.index===j.stack.of-1)return f;return k.block(f,j)},idx:function(f,j,k){return k.block(f,j.push(j.stack.index))}};G.prototype.push=function(f){return new G(f,this)};G.prototype.go=function(f){for(var j=this;j;){f=j.head(f);j=j.tail}return f};var r=/[&<>\"]/,n=/&/g,x=/</g,v=/>/g,y=/\"/g;q.escapeHtml=function(f){if(typeof f==="string"){if(!r.test(f))return f;
return f.replace(n,"&amp;").replace(x,"&lt;").replace(v,"&gt;").replace(y,"&quot;")}return f};var C=/\\/g,D=/\r/g,O=/\u2028/g,K=/\u2029/g,U=/\n/g,I=/\f/g,P=/'/g,S=/"/g,T=/\t/g;q.escapeJs=function(f){if(typeof f==="string")return f.replace(C,"\\\\").replace(S,'\\"').replace(P,"\\'").replace(D,"\\r").replace(O,"\\u2028").replace(K,"\\u2029").replace(U,"\\n").replace(I,"\\f").replace(T,"\\t");return f}})(dust);if(typeof exports!=="undefined"){require("./server")(dust);module.exports=dust}
(function(q){function z(r,n){for(var x=[n[0]],v=1,y=n.length;v<y;v++){var C=q.filterNode(r,n[v]);C&&x.push(C)}return x}function H(r,n){return n}function p(){}function J(r,n,x){return"."+x+"("+q.compileNode(r,n[1])+","+q.compileNode(r,n[2])+","+q.compileNode(r,n[4])+","+q.compileNode(r,n[3])+")"}q.compile=function(r,n){var x,v=q.parse(r);x=q.filterNode({},v);v={name:n,bodies:[],blocks:{},index:0,auto:"h"};x='(function(){dust.register("'+n+'",'+q.compileNode(v,x)+");";var y;var C=[],D=v.blocks;for(y in D)C.push(y+
":"+D[y]);if(C.length){v.blocks="ctx=ctx.shiftBlocks(blocks);";y="var blocks={"+C.join(",")+"};"}else y=v.blocks="";y=x+y;x=[];C=v.bodies;v=v.blocks;D=0;for(var O=C.length;D<O;D++)x[D]="function body_"+D+"(chk,ctx){"+v+"return chk"+C[D]+";}";v=x.join("");return y+v+"})();"};q.filterNode=function(r,n){return q.optimizers[n[0]](r,n)};q.optimizers={body:function(r,n){for(var x=[n[0]],v,y=1,C=n.length;y<C;y++){var D=q.filterNode(r,n[y]);if(D)if(D[0]==="buffer")if(v)v[1]+=D[1];else{v=D;x.push(D)}else{v=
null;x.push(D)}}return x},buffer:H,special:function(r,n){return["buffer",l[n[1]]]},format:p,reference:z,"#":z,"?":z,"^":z,"<":z,"+":z,"@":z,partial:z,context:z,params:z,bodies:z,param:z,filters:H,key:H,path:H,literal:H,comment:p};var l={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};q.compileNode=function(r,n){return q.nodes[n[0]](r,n)};q.nodes={body:function(r,n){for(var x=r.index++,v="body_"+x,y="",C=1,D=n.length;C<D;C++)y+=q.compileNode(r,n[C]);r.bodies[x]=y;return v},buffer:function(r,n){return".write("+
G(n[1])+")"},format:function(r,n){return".write("+G(n[1]+n[2])+")"},reference:function(r,n){return".reference("+q.compileNode(r,n[1])+",ctx,"+q.compileNode(r,n[2])+")"},"#":function(r,n){return J(r,n,"section")},"?":function(r,n){return J(r,n,"exists")},"^":function(r,n){return J(r,n,"notexists")},"<":function(r,n){for(var x=n[4],v=1,y=x.length;v<y;v++){var C=x[v];if(C[1][1]==="block"){r.blocks[n[1].text]=q.compileNode(r,C[2]);break}}return""},"+":function(r,n){return".block(ctx.getBlock("+G(n[1].text)+
"),"+q.compileNode(r,n[2])+","+q.compileNode(r,n[4])+","+q.compileNode(r,n[3])+")"},"@":function(r,n){return".helper("+G(n[1].text)+","+q.compileNode(r,n[2])+","+q.compileNode(r,n[4])+","+q.compileNode(r,n[3])+")"},partial:function(r,n){return".partial("+q.compileNode(r,n[1])+","+q.compileNode(r,n[2])+")"},context:function(r,n){if(n[1])return"ctx.rebase("+q.compileNode(r,n[1])+")";return"ctx"},params:function(r,n){for(var x=[],v=1,y=n.length;v<y;v++)x.push(q.compileNode(r,n[v]));if(x.length)return"{"+
x.join(",")+"}";return"null"},bodies:function(r,n){for(var x=[],v=1,y=n.length;v<y;v++)x.push(q.compileNode(r,n[v]));return"{"+x.join(",")+"}"},param:function(r,n){return q.compileNode(r,n[1])+":"+q.compileNode(r,n[2])},filters:function(r,n){for(var x=[],v=1,y=n.length;v<y;v++)x.push('"'+n[v]+'"');return'"'+r.auto+'",['+x.join(",")+"]"},key:function(r,n){return'ctx.get("'+n[1]+'")'},path:function(r,n){for(var x=n[1],v=n[2],y=[],C=0,D=v.length;C<D;C++)y.push('"'+v[C]+'"');return"ctx.getPath("+x+",["+
y.join(",")+"])"},literal:function(r,n){return G(n[1])}};var G=typeof JSON==="undefined"?function(r){return'"'+q.escapeJs(r)+'"'}:JSON.stringify})(typeof exports!=="undefined"?exports:window.dust);
(function(q){var z=function(){var H={parse:function(p){function J(o){return'"'+o.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\n/g,"\\n")+'"'}function l(o){if(!(a<Q)){if(a>Q){Q=a;V=[]}V.push(o)}}function G(){var o="body@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=[];for(var c=r();c!==null;){b.push(c);c=r()}b=b!==null?["body"].concat(b):null;u[o]={nextPos:a,result:b};return b}function r(){var o="part@"+a,b=u[o];
if(b){a=b.nextPos;return b.result}b=j();if(b!==null)b=b;else{b=n();if(b!==null)b=b;else{b="partial@"+a;var c=u[b];if(c){a=c.nextPos;b=c.result}else{c=h;h=false;var d=a,g=w();if(g!==null){if(p.substr(a,1)===">"){var e=">";a+=1}else{e=null;h&&l('">"')}if(e!==null){var i=I();i=i!==null?["literal",i]:null;if(i!==null)i=i;else{i=P();i=i!==null?i:null}if(i!==null){var m=y();if(m!==null){if(p.substr(a,1)==="/"){var s="/";a+=1}else{s=null;h&&l('"/"')}if(s!==null){var t=B();if(t!==null)g=[g,e,i,m,s,t];else{g=
null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}d=g!==null?["partial",g[2],g[3]]:null;(h=c)&&d===null&&l("partial");u[b]={nextPos:a,result:d};b=d}if(b!==null)b=b;else{b=O();if(b!==null)b=b;else{b=D();if(b!==null)b=b;else{b="buffer@"+a;if(c=u[b]){a=c.nextPos;b=c.result}else{c=h;h=false;d=a;g=F();if(g!==null){e=[];for(i=N();i!==null;){e.push(i);i=N()}if(e!==null)g=[g,e];else{g=null;a=d}}else{g=null;a=d}d=g!==null?["format",g[0],g[1].join("")]:null;if(d!==
null)d=d;else{i=g=a;e=h;h=false;m=k();h=e;if(m===null)e="";else{e=null;a=i}if(e!==null){m=a;i=h;h=false;s=F();h=i;if(s===null)i="";else{i=null;a=m}if(i!==null){m=a;s=h;h=false;t=j();h=s;if(t===null)s="";else{s=null;a=m}if(s!==null){if(p.length>a){m=p.charAt(a);a++}else{m=null;h&&l("any character")}if(m!==null)e=[e,i,s,m];else{e=null;a=g}}else{e=null;a=g}}else{e=null;a=g}}else{e=null;a=g}g=e!==null?e[3]:null;if(g!==null)for(d=[];g!==null;){d.push(g);i=g=a;e=h;h=false;m=k();h=e;if(m===null)e="";else{e=
null;a=i}if(e!==null){m=a;i=h;h=false;s=F();h=i;if(s===null)i="";else{i=null;a=m}if(i!==null){m=a;s=h;h=false;t=j();h=s;if(t===null)s="";else{s=null;a=m}if(s!==null){if(p.length>a){m=p.charAt(a);a++}else{m=null;h&&l("any character")}if(m!==null)e=[e,i,s,m];else{e=null;a=g}}else{e=null;a=g}}else{e=null;a=g}}else{e=null;a=g}g=e!==null?e[3]:null}else d=null;d=d!==null?["buffer",d.join("")]:null;d=d!==null?d:null}(h=c)&&d===null&&l("buffer");u[b]={nextPos:a,result:d};b=d}b=b!==null?b:null}}}}}u[o]={nextPos:a,
result:b};return b}function n(){var o="section@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=x();if(d!==null){var g=B();if(g!==null){var e=G();if(e!==null){var i=C();if(i!==null){var m=v();if(m!==null){var s=d[1].text===m.text?"":null;if(s!==null)d=[d,g,e,i,m,s];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?function(t,A,L){L.push(["param",["literal","block"],A]);t.push(L);return t}(d[0],d[2],d[3],d[4]):null;if(c!==
null)c=c;else{c=a;d=x();if(d!==null){if(p.substr(a,1)==="/"){g="/";a+=1}else{g=null;h&&l('"/"')}if(g!==null){e=B();if(e!==null)d=[d,g,e];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?function(t){t.push(["bodies"]);return t}(d[0]):null;c=c!==null?c:null}(h=b)&&c===null&&l("section");u[o]={nextPos:a,result:c};return c}function x(){var o="sec_tag_start@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=a;var c=w();if(c!==null){if(p.substr(a).match(/^[#?^<+@]/)!==null){var d=p.charAt(a);a++}else{d=
null;h&&l("[#?^<+@]")}if(d!==null){var g=K();if(g!==null){var e=y();if(e!==null){var i;i="params@"+a;var m=u[i];if(m){a=m.nextPos;i=m.result}else{m=h;h=false;var s=[],t=a,A=N();if(A!==null){var L=I();if(L!==null){if(p.substr(a,1)==="="){var M="=";a+=1}else{M=null;h&&l('"="')}if(M!==null){var E=K();if(E!==null)E=E;else{E=P();E=E!==null?E:null}if(E!==null)A=[A,L,M,E];else{A=null;a=t}}else{A=null;a=t}}else{A=null;a=t}}else{A=null;a=t}for(t=A!==null?["param",["literal",A[1]],A[3]]:null;t!==null;){s.push(t);
t=a;A=N();if(A!==null){L=I();if(L!==null){if(p.substr(a,1)==="="){M="=";a+=1}else{M=null;h&&l('"="')}if(M!==null){E=K();if(E!==null)E=E;else{E=P();E=E!==null?E:null}if(E!==null)A=[A,L,M,E];else{A=null;a=t}}else{A=null;a=t}}else{A=null;a=t}}else{A=null;a=t}t=A!==null?["param",["literal",A[1]],A[3]]:null}s=s!==null?["params"].concat(s):null;(h=m)&&s===null&&l("params");u[i]={nextPos:a,result:s};i=s}if(i!==null)c=[c,d,g,e,i];else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}}else{c=
null;a=b}b=c!==null?[c[1],c[2],c[3],c[4]]:null;u[o]={nextPos:a,result:b};return b}function v(){var o="end_tag@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=w();if(d!==null){if(p.substr(a,1)==="/"){var g="/";a+=1}else{g=null;h&&l('"/"')}if(g!==null){var e=K();if(e!==null){var i=B();if(i!==null)d=[d,g,e,i];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?d[2]:null;(h=b)&&c===null&&l("end tag");u[o]={nextPos:a,result:c};return c}function y(){var o="context@"+
a,b=u[o];if(b){a=b.nextPos;return b.result}b=a;if(p.substr(a,1)===":"){var c=":";a+=1}else{c=null;h&&l('":"')}if(c!==null){var d=K();if(d!==null)c=[c,d];else{c=null;a=b}}else{c=null;a=b}b=c!==null?c[1]:null;b=b!==null?b:"";b=b!==null?b?["context",b]:["context"]:null;u[o]={nextPos:a,result:b};return b}function C(){var o="bodies@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=[],d=a,g=w();if(g!==null){if(p.substr(a,1)===":"){var e=":";a+=1}else{e=null;h&&l('":"')}if(e!==null){var i=I();
if(i!==null){var m=B();if(m!==null){var s=G();if(s!==null)g=[g,e,i,m,s];else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}for(d=g!==null?["param",["literal",g[2]],g[4]]:null;d!==null;){c.push(d);d=a;g=w();if(g!==null){if(p.substr(a,1)===":"){e=":";a+=1}else{e=null;h&&l('":"')}if(e!==null){i=I();if(i!==null){m=B();if(m!==null){s=G();if(s!==null)g=[g,e,i,m,s];else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}d=g!==null?["param",["literal",
g[2]],g[4]]:null}c=c!==null?["bodies"].concat(c):null;(h=b)&&c===null&&l("bodies");u[o]={nextPos:a,result:c};return c}function D(){var o="reference@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=w();if(d!==null){var g=K();if(g!==null){var e;e="filters@"+a;var i=u[e];if(i){a=i.nextPos;e=i.result}else{i=h;h=false;var m=[],s=a;if(p.substr(a,1)==="|"){var t="|";a+=1}else{t=null;h&&l('"|"')}if(t!==null){var A=I();if(A!==null)t=[t,A];else{t=null;a=s}}else{t=null;a=s}for(s=t!==null?t[1]:
null;s!==null;){m.push(s);s=a;if(p.substr(a,1)==="|"){t="|";a+=1}else{t=null;h&&l('"|"')}if(t!==null){A=I();if(A!==null)t=[t,A];else{t=null;a=s}}else{t=null;a=s}s=t!==null?t[1]:null}m=m!==null?["filters"].concat(m):null;(h=i)&&m===null&&l("filters");u[e]={nextPos:a,result:m};e=m}if(e!==null){i=B();if(i!==null)d=[d,g,e,i];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["reference",d[1],d[2]]:null;(h=b)&&c===null&&l("reference");u[o]={nextPos:a,result:c};return c}function O(){var o=
"special@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=w();if(d!==null){if(p.substr(a,1)==="~"){var g="~";a+=1}else{g=null;h&&l('"~"')}if(g!==null){var e=I();if(e!==null){var i=B();if(i!==null)d=[d,g,e,i];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["special",d[2]]:null;(h=b)&&c===null&&l("special");u[o]={nextPos:a,result:c};return c}function K(){var o="identifier@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=U();c=c!==null?W(["path"].concat(c),
o):null;if(c!==null)c=c;else{c=I();c=c!==null?W(["key",c],o):null;c=c!==null?c:null}(h=b)&&c===null&&l("identifier");u[o]={nextPos:a,result:c};return c}function U(){var o="path@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=I();d=d!==null?d:"";if(d!==null){var g=a;if(p.substr(a,1)==="."){var e=".";a+=1}else{e=null;h&&l('"."')}if(e!==null){var i=I();if(i!==null)e=[e,i];else{e=null;a=g}}else{e=null;a=g}g=e!==null?e[1]:null;if(g!==null)for(var m=[];g!==null;){m.push(g);g=a;if(p.substr(a,
1)==="."){e=".";a+=1}else{e=null;h&&l('"."')}if(e!==null){i=I();if(i!==null)e=[e,i];else{e=null;a=g}}else{e=null;a=g}g=e!==null?e[1]:null}else m=null;if(m!==null)d=[d,m];else{d=null;a=c}}else{d=null;a=c}c=d!==null?function(s,t){if(s){t.unshift(s);return[false,t]}return[true,t]}(d[0],d[1]):null;if(c!==null)c=c;else{if(p.substr(a,1)==="."){c=".";a+=1}else{c=null;h&&l('"."')}c=c!==null?[true,[]]:null;c=c!==null?c:null}(h=b)&&c===null&&l("path");u[o]={nextPos:a,result:c};return c}function I(){var o="key@"+
a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a;if(p.substr(a).match(/^[a-zA-Z_$]/)!==null){var d=p.charAt(a);a++}else{d=null;h&&l("[a-zA-Z_$]")}if(d!==null){var g=[];if(p.substr(a).match(/^[0-9a-zA-Z_$]/)!==null){var e=p.charAt(a);a++}else{e=null;h&&l("[0-9a-zA-Z_$]")}for(;e!==null;){g.push(e);if(p.substr(a).match(/^[0-9a-zA-Z_$]/)!==null){e=p.charAt(a);a++}else{e=null;h&&l("[0-9a-zA-Z_$]")}}if(g!==null)d=[d,g];else{d=null;a=c}}else{d=null;a=c}c=d!==null?d[0]+d[1].join(""):null;(h=
b)&&c===null&&l("key");u[o]={nextPos:a,result:c};return c}function P(){var o="inline@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a;if(p.substr(a,1)==='"'){var d='"';a+=1}else{d=null;h&&l('"\\""')}if(d!==null){if(p.substr(a,1)==='"'){var g='"';a+=1}else{g=null;h&&l('"\\""')}if(g!==null)d=[d,g];else{d=null;a=c}}else{d=null;a=c}c=d!==null?["literal",""]:null;if(c!==null)c=c;else{c=a;if(p.substr(a,1)==='"'){d='"';a+=1}else{d=null;h&&l('"\\""')}if(d!==null){g=T();if(g!==null){if(p.substr(a,
1)==='"'){var e='"';a+=1}else{e=null;h&&l('"\\""')}if(e!==null)d=[d,g,e];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["literal",d[1]]:null;if(c!==null)c=c;else{c=a;if(p.substr(a,1)==='"'){d='"';a+=1}else{d=null;h&&l('"\\""')}if(d!==null){e=S();if(e!==null)for(g=[];e!==null;){g.push(e);e=S()}else g=null;if(g!==null){if(p.substr(a,1)==='"'){e='"';a+=1}else{e=null;h&&l('"\\""')}if(e!==null)d=[d,g,e];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["body"].concat(d[1]):null;
c=c!==null?c:null}}(h=b)&&c===null&&l("inline");u[o]={nextPos:a,result:c};return c}function S(){var o="inline_part@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=O();if(b!==null)b=b;else{b=D();if(b!==null)b=b;else{b=T();b=b!==null?["buffer",b]:null;b=b!==null?b:null}}u[o]={nextPos:a,result:b};return b}function T(){var o="literal@"+a,b=u[o];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=a,g=h;h=false;var e=k();h=g;if(e===null)g="";else{g=null;a=d}if(g!==null){e=a;d=h;h=false;var i=F();h=d;
if(i===null)d="";else{d=null;a=e}if(d!==null){e=f();if(e!==null)e=e;else{if(p.substr(a).match(/^[^"]/)!==null){e=p.charAt(a);a++}else{e=null;h&&l('[^"]')}e=e!==null?e:null}if(e!==null)g=[g,d,e];else{g=null;a=c}}else{g=null;a=c}}else{g=null;a=c}c=g!==null?g[2]:null;if(c!==null)for(var m=[];c!==null;){m.push(c);d=c=a;g=h;h=false;e=k();h=g;if(e===null)g="";else{g=null;a=d}if(g!==null){e=a;d=h;h=false;i=F();h=d;if(i===null)d="";else{d=null;a=e}if(d!==null){e=f();if(e!==null)e=e;else{if(p.substr(a).match(/^[^"]/)!==
null){e=p.charAt(a);a++}else{e=null;h&&l('[^"]')}e=e!==null?e:null}if(e!==null)g=[g,d,e];else{g=null;a=c}}else{g=null;a=c}}else{g=null;a=c}c=g!==null?g[2]:null}else m=null;m=m!==null?m.join(""):null;(h=b)&&m===null&&l("literal");u[o]={nextPos:a,result:m};return m}function f(){var o="esc@"+a,b=u[o];if(b){a=b.nextPos;return b.result}if(p.substr(a,2)==='\\"'){b='\\"';a+=2}else{b=null;h&&l('"\\\\\\""')}b=b!==null?'"':null;u[o]={nextPos:a,result:b};return b}function j(){var o="comment@"+a,b=u[o];if(b){a=
b.nextPos;return b.result}b=h;h=false;var c=a;if(p.substr(a,2)==="{!"){var d="{!";a+=2}else{d=null;h&&l('"{!"')}if(d!==null){var g=[],e=a,i=a,m=h;h=false;if(p.substr(a,2)==="!}"){var s="!}";a+=2}else{s=null;h&&l('"!}"')}h=m;if(s===null)m="";else{m=null;a=i}if(m!==null){if(p.length>a){i=p.charAt(a);a++}else{i=null;h&&l("any character")}if(i!==null)i=[m,i];else{i=null;a=e}}else{i=null;a=e}for(e=i!==null?i[1]:null;e!==null;){g.push(e);i=e=a;m=h;h=false;if(p.substr(a,2)==="!}"){s="!}";a+=2}else{s=null;
h&&l('"!}"')}h=m;if(s===null)m="";else{m=null;a=i}if(m!==null){if(p.length>a){i=p.charAt(a);a++}else{i=null;h&&l("any character")}if(i!==null)i=[m,i];else{i=null;a=e}}else{i=null;a=e}e=i!==null?i[1]:null}if(g!==null){if(p.substr(a,2)==="!}"){e="!}";a+=2}else{e=null;h&&l('"!}"')}if(e!==null)d=[d,g,e];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["comment",d[1].join("")]:null;(h=b)&&c===null&&l("comment");u[o]={nextPos:a,result:c};return c}function k(){var o="tag@"+a,b=u[o];if(b){a=
b.nextPos;return b.result}b=a;var c=w();if(c!==null){if(p.substr(a).match(/^[#?^><+%:@\/~]/)!==null){var d=p.charAt(a);a++}else{d=null;h&&l("[#?^><+%:@\\/~]")}if(d!==null){var g=a,e=a,i=h;h=false;var m=B();h=i;if(m===null)i="";else{i=null;a=e}if(i!==null){e=a;m=h;h=false;var s=F();h=m;if(s===null)m="";else{m=null;a=e}if(m!==null){if(p.length>a){e=p.charAt(a);a++}else{e=null;h&&l("any character")}if(e!==null)i=[i,m,e];else{i=null;a=g}}else{i=null;a=g}}else{i=null;a=g}if(i!==null)for(var t=[];i!==null;){t.push(i);
e=g=a;i=h;h=false;m=B();h=i;if(m===null)i="";else{i=null;a=e}if(i!==null){e=a;m=h;h=false;s=F();h=m;if(s===null)m="";else{m=null;a=e}if(m!==null){if(p.length>a){e=p.charAt(a);a++}else{e=null;h&&l("any character")}if(e!==null)i=[i,m,e];else{i=null;a=g}}else{i=null;a=g}}else{i=null;a=g}}else t=null;if(t!==null){g=B();if(g!==null)c=[c,d,t,g];else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}if(c!==null)b=c;else{b=D();b=b!==null?b:null}u[o]={nextPos:a,result:b};return b}function w(){var o=
"ld@"+a,b=u[o];if(b){a=b.nextPos;return b.result}if(p.substr(a,1)==="{"){b="{";a+=1}else{b=null;h&&l('"{"')}u[o]={nextPos:a,result:b};return b}function B(){var o="rd@"+a,b=u[o];if(b){a=b.nextPos;return b.result}if(p.substr(a,1)==="}"){b="}";a+=1}else{b=null;h&&l('"}"')}u[o]={nextPos:a,result:b};return b}function F(){var o="eol@"+a,b=u[o];if(b){a=b.nextPos;return b.result}if(p.substr(a,1)==="\n"){b="\n";a+=1}else{b=null;h&&l('"\\n"')}if(b!==null)b=b;else{if(p.substr(a,2)==="\r\n"){b="\r\n";a+=2}else{b=
null;h&&l('"\\r\\n"')}if(b!==null)b=b;else{if(p.substr(a,1)==="\r"){b="\r";a+=1}else{b=null;h&&l('"\\r"')}if(b!==null)b=b;else{if(p.substr(a,1)==="\u2028"){b="\u2028";a+=1}else{b=null;h&&l('"\\u2028"')}if(b!==null)b=b;else{if(p.substr(a,1)==="\u2029"){b="\u2029";a+=1}else{b=null;h&&l('"\\u2029"')}b=b!==null?b:null}}}}u[o]={nextPos:a,result:b};return b}function N(){var o="ws@"+a,b=u[o];if(b){a=b.nextPos;return b.result}if(p.substr(a).match(/^[\t\u000b\u000c \u00a0\ufeff]/)!==null){b=p.charAt(a);a++}else{b=
null;h&&l("[\t\u000b\u000c \u00a0\ufeff]")}u[o]={nextPos:a,result:b};return b}function X(){var o=function(c){c.sort();for(var d=null,g=[],e=0;e<c.length;e++)if(c[e]!==d){g.push(c[e]);d=c[e]}switch(g.length){case 0:return"end of input";case 1:return g[0];default:return g.slice(0,g.length-1).join(", ")+" or "+g[g.length-1]}}(V),b=Math.max(a,Q);b=b<p.length?J(p.charAt(b)):"end of input";return"Expected "+o+" but "+b+" found."}function Y(){for(var o=1,b=1,c=false,d=0;d<Q;d++){var g=p.charAt(d);if(g===
"\n"){c||o++;b=1;c=false}else if(g==="\r"|g==="\u2028"||g==="\u2029"){o++;b=1;c=true}else{b++;c=false}}return{line:o,column:b}}function W(o,b){o.text=p.substring(b.split("@")[1],a);return o}var a=0,h=true,Q=0,V=[],u={},R=G();if(R===null||a!==p.length){R=Y();throw new SyntaxError(X(),R.line,R.column);}return R},toSource:function(){return this._source}};H.SyntaxError=function(p,J,l){this.name="SyntaxError";this.message=p;this.line=J;this.column=l};H.SyntaxError.prototype=Error.prototype;return H}();
q.parse=z.parse})(typeof exports!=="undefined"?exports:window.dust);
